{"version":3,"sources":["webpack:///wiprint-admin.js","webpack:///webpack/bootstrap adaaf6c23491a95cf006","webpack:///external \"TFS/WorkItemTracking/RestClient\"","webpack:///./src/wiprint-admin.ts","webpack:///external \"VSS/Context\"","webpack:///external \"VSS/Controls/Dialogs\""],"names":["define","__WEBPACK_EXTERNAL_MODULE_0__","__WEBPACK_EXTERNAL_MODULE_6__","__WEBPACK_EXTERNAL_MODULE_7__","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","undefined","require","Context","WITClient","Dialogs","selectSelected","activeSelected","$","sanitize","removeClass","selectedFields","filter","field","addClass","selectAll","activeAll","allFields","type","save","saveFields","slice","makeClean","dataService","then","service","setValue","key","scopeType","refreshData","dirty","dialog_1","show","ModalDialog","title","content","html","activeType","buttons","Save","close","No","Cancel","types","splice","length","getValue","data","forEach","push","populateSelected","append","fieldInstances","len","referenceName","populateAll","makeDirty","prop","sort","a","b","click","e","dblclick","scroll","child","parent","scrollTop","offset","top","value","tfsContext","getDefaultWebContext","VSS","getService","ServiceIds","ExtensionData","witClient","getClient","getWorkItemTypes","project","witypes","color","description","allIndex","indexOf","selectedIndex","unshift","index","String","this","replace","apply"],"mappings":"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","file":"wiprint-admin.js","sourcesContent":["define([\"TFS/WorkItemTracking/RestClient\",\"VSS/Context\",\"VSS/Controls/Dialogs\"], function(__WEBPACK_EXTERNAL_MODULE_0__, __WEBPACK_EXTERNAL_MODULE_6__, __WEBPACK_EXTERNAL_MODULE_7__) { return /******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId]) {\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/ \t\t}\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 5);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n/***/ }),\n/* 1 */,\n/* 2 */,\n/* 3 */,\n/* 4 */,\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\nvar __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;!(__WEBPACK_AMD_DEFINE_ARRAY__ = [__webpack_require__, exports, __webpack_require__(6), __webpack_require__(0), __webpack_require__(7)], __WEBPACK_AMD_DEFINE_RESULT__ = (function (require, exports, Context, WITClient, Dialogs) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tfsContext = Context.getDefaultWebContext();\r\n    var dataService = VSS.getService(VSS.ServiceIds.ExtensionData);\r\n    var witClient = WITClient.getClient();\r\n    var allFields = [];\r\n    var selectedFields = [];\r\n    var types = [];\r\n    var key;\r\n    var dirty = false;\r\n    var activeType;\r\n    var activeSelected;\r\n    var activeAll;\r\n    var typesList;\r\n    function selectSelected(name) {\r\n        if (activeSelected) {\r\n            $(\"#selected-\" + activeSelected.name.sanitize()).removeClass(\"selected\");\r\n        }\r\n        activeSelected = selectedFields.filter(function (field) {\r\n            return field.name === name;\r\n        })[0];\r\n        $(\"#selected-\" + name.sanitize()).addClass(\"selected\");\r\n    }\r\n    function selectAll(name) {\r\n        if (activeAll) {\r\n            $(\"#all-\" + activeAll.name.sanitize()).removeClass(\"selected\");\r\n        }\r\n        activeAll = allFields.filter(function (type) {\r\n            return type.name === name;\r\n        })[0];\r\n        $(\"#all-\" + name.sanitize()).addClass(\"selected\");\r\n    }\r\n    makeClean();\r\n    witClient.getWorkItemTypes(tfsContext.project.name).then(function (witypes) {\r\n        witypes.forEach(function (type) {\r\n            types.push(type);\r\n            $(\"#typesList\").append(\"<li id=\\\"type-\" + type.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (type.color ?\r\n                    \"<span class=\\\"ms-ListItem-image\\\" style=\\\"background-color: #\" + type.color + \"\\\"></span>\" :\r\n                    \"\") +\r\n                (\"<span class=\\\"ms-ListItem-primaryText\\\">\" + type.name + \"</span>\") +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + type.description + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#type-\" + type.name.sanitize()).click(function (e) {\r\n                refreshData(type.name);\r\n            });\r\n        });\r\n    });\r\n    $(\"#save\").click(function (e) { return save(activeType.name); });\r\n    $(\"#cancel\").click(function (e) {\r\n        makeClean();\r\n        refreshData(activeType.name);\r\n    });\r\n    function save(name) {\r\n        var saveFields = selectedFields.slice();\r\n        makeClean();\r\n        activeAll = null;\r\n        activeSelected = null;\r\n        dataService.then(function (service) {\r\n            service.setValue(key, saveFields, { scopeType: \"user\" }).then(function () {\r\n                refreshData(name);\r\n            });\r\n        });\r\n    }\r\n    function refreshData(name) {\r\n        if (dirty) {\r\n            var dialog_1 = Dialogs.show(Dialogs.ModalDialog, {\r\n                title: \"Unsaved Changes\",\r\n                content: $(\"<p/>\").addClass(\"confirmation-text\").html(\"Do you want to save changes for <b>\" + activeType.name + \"</b>?\"),\r\n                buttons: {\r\n                    \"Save\": function () {\r\n                        save(name);\r\n                        dialog_1.close();\r\n                    },\r\n                    \"No\": function () {\r\n                        makeClean();\r\n                        activeAll = null;\r\n                        activeSelected = null;\r\n                        refreshData(name);\r\n                        dialog_1.close();\r\n                    },\r\n                    \"Cancel\": function () {\r\n                        dialog_1.close();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            if (activeType) {\r\n                $(\"#type-\" + activeType.name.sanitize()).removeClass(\"selected\");\r\n            }\r\n            activeType = types.filter(function (type) {\r\n                return type.name === name;\r\n            })[0];\r\n            $(\"#type-\" + name.sanitize()).addClass(\"selected\");\r\n            key = \"wiprint-\" + activeType.name.sanitize();\r\n            $(\"#allList\").html(\"\");\r\n            allFields.splice(0, allFields.length);\r\n            $(\"#selectedList\").html(\"\");\r\n            selectedFields.splice(0, selectedFields.length);\r\n            dataService.then(function (service) {\r\n                service.getValue(key, { scopeType: \"user\" })\r\n                    .then(function (data) {\r\n                    if (data && data.length > 0) {\r\n                        data.forEach(function (field) {\r\n                            if (field !== null) {\r\n                                selectedFields.push(field);\r\n                            }\r\n                        });\r\n                        populateSelected();\r\n                    }\r\n                    else {\r\n                        $(\"#selectedList\").append(\"<li class=\\\"ms-ListItem\\\">\" +\r\n                            \"<span class=\\\"ms-ListItem-secondaryText\\\">No Saved Data</span>\" +\r\n                            \"</li>\");\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    activeType.fieldInstances\r\n                        .filter(function (field) {\r\n                        for (var i = 0, len = selectedFields.length; i < len; i++) {\r\n                            if (field.referenceName === selectedFields[i].referenceName) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        return true;\r\n                    })\r\n                        .forEach(function (field) {\r\n                        allFields.push(field);\r\n                    });\r\n                    populateAll();\r\n                });\r\n            });\r\n        }\r\n    }\r\n    function makeDirty() {\r\n        if (!dirty) {\r\n            dirty = true;\r\n            $(\"#save\").prop(\"disabled\", false);\r\n            $(\"#cancel\").prop(\"disabled\", false);\r\n        }\r\n    }\r\n    function makeClean() {\r\n        dirty = false;\r\n        $(\"#save\").prop(\"disabled\", true);\r\n        $(\"#cancel\").prop(\"disabled\", true);\r\n        activeAll = null;\r\n        activeSelected = null;\r\n    }\r\n    function populateAll() {\r\n        $(\"#allList\").html(\"\");\r\n        allFields\r\n            .sort(function (a, b) { return a.name > b.name ? 1 : -1; })\r\n            .forEach(function (field) {\r\n            $(\"#allList\").append(\"<li id=\\\"all-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#all-\" + field.name.sanitize()).click(function (e) {\r\n                selectAll(field.name);\r\n            }).dblclick(function (e) {\r\n                $(\"#push\").click();\r\n            });\r\n        });\r\n    }\r\n    function populateSelected() {\r\n        $(\"#selectedList\").html(\"\");\r\n        selectedFields.forEach(function (field) {\r\n            $(\"#selectedList\").append(\"<li id=\\\"selected-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#selected-\" + field.name.sanitize()).click(function (e) {\r\n                selectSelected(field.name);\r\n            }).dblclick(function (e) {\r\n                $(\"#pop\").click();\r\n            });\r\n        });\r\n    }\r\n    $(\"#push\").click(function (e) {\r\n        if (activeAll) {\r\n            var allIndex = allFields.indexOf(activeAll);\r\n            var selectedIndex = selectedFields.indexOf(activeSelected) === -1 ?\r\n                selectedFields.length - 1 : selectedFields.indexOf(activeSelected);\r\n            allFields.splice(allIndex, 1);\r\n            selectedFields.splice(selectedIndex + 1, 0, activeAll);\r\n            populateAll();\r\n            if (allFields.length > 0) {\r\n                $(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()).click();\r\n                scroll($(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()));\r\n            }\r\n            else {\r\n                activeAll = null;\r\n            }\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#pop\").click(function (e) {\r\n        if (activeSelected) {\r\n            var selectedIndex = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(selectedIndex, 1);\r\n            allFields.push(activeSelected);\r\n            populateSelected();\r\n            populateAll();\r\n            $(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()).click();\r\n            scroll($(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()));\r\n            if (selectedFields.length > 0) {\r\n                $(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()).click();\r\n                scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()));\r\n            }\r\n            else {\r\n                activeSelected = null;\r\n            }\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#top\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\r\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\r\n            selectedFields.unshift(activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[0].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[0].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#bottom\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) < selectedFields.length) {\r\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\r\n            selectedFields.push(activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#up\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\r\n            var index = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(index, 1);\r\n            selectedFields.splice(index - 1, 0, activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[index - 1].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[index - 1].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#down\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) < selectedFields.length) {\r\n            var index = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(index, 1);\r\n            selectedFields.splice(index + 1, 0, activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    String.prototype.sanitize = function () {\r\n        return this.replace(/\\s/g, \"-\").replace(/[^a-z0-9\\-]/gi, \"\");\r\n    };\r\n    function scroll(child) {\r\n        var parent = child.parent();\r\n        parent.scrollTop(child.offset().top - parent.offset().top + parent.scrollTop() - 296);\r\n    }\r\n}).apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__),\n\t\t\t\t__WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\r\n\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports) {\n\nmodule.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n/***/ })\n/******/ ])});;\n\n\n// WEBPACK FOOTER //\n// wiprint-admin.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 5);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap adaaf6c23491a95cf006","module.exports = __WEBPACK_EXTERNAL_MODULE_0__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"TFS/WorkItemTracking/RestClient\"\n// module id = 0\n// module chunks = 0 1","define([\"require\", \"exports\", \"VSS/Context\", \"TFS/WorkItemTracking/RestClient\", \"VSS/Controls/Dialogs\"], function (require, exports, Context, WITClient, Dialogs) {\r\n    \"use strict\";\r\n    Object.defineProperty(exports, \"__esModule\", { value: true });\r\n    var tfsContext = Context.getDefaultWebContext();\r\n    var dataService = VSS.getService(VSS.ServiceIds.ExtensionData);\r\n    var witClient = WITClient.getClient();\r\n    var allFields = [];\r\n    var selectedFields = [];\r\n    var types = [];\r\n    var key;\r\n    var dirty = false;\r\n    var activeType;\r\n    var activeSelected;\r\n    var activeAll;\r\n    var typesList;\r\n    function selectSelected(name) {\r\n        if (activeSelected) {\r\n            $(\"#selected-\" + activeSelected.name.sanitize()).removeClass(\"selected\");\r\n        }\r\n        activeSelected = selectedFields.filter(function (field) {\r\n            return field.name === name;\r\n        })[0];\r\n        $(\"#selected-\" + name.sanitize()).addClass(\"selected\");\r\n    }\r\n    function selectAll(name) {\r\n        if (activeAll) {\r\n            $(\"#all-\" + activeAll.name.sanitize()).removeClass(\"selected\");\r\n        }\r\n        activeAll = allFields.filter(function (type) {\r\n            return type.name === name;\r\n        })[0];\r\n        $(\"#all-\" + name.sanitize()).addClass(\"selected\");\r\n    }\r\n    makeClean();\r\n    witClient.getWorkItemTypes(tfsContext.project.name).then(function (witypes) {\r\n        witypes.forEach(function (type) {\r\n            types.push(type);\r\n            $(\"#typesList\").append(\"<li id=\\\"type-\" + type.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (type.color ?\r\n                    \"<span class=\\\"ms-ListItem-image\\\" style=\\\"background-color: #\" + type.color + \"\\\"></span>\" :\r\n                    \"\") +\r\n                (\"<span class=\\\"ms-ListItem-primaryText\\\">\" + type.name + \"</span>\") +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + type.description + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#type-\" + type.name.sanitize()).click(function (e) {\r\n                refreshData(type.name);\r\n            });\r\n        });\r\n    });\r\n    $(\"#save\").click(function (e) { return save(activeType.name); });\r\n    $(\"#cancel\").click(function (e) {\r\n        makeClean();\r\n        refreshData(activeType.name);\r\n    });\r\n    function save(name) {\r\n        var saveFields = selectedFields.slice();\r\n        makeClean();\r\n        activeAll = null;\r\n        activeSelected = null;\r\n        dataService.then(function (service) {\r\n            service.setValue(key, saveFields, { scopeType: \"user\" }).then(function () {\r\n                refreshData(name);\r\n            });\r\n        });\r\n    }\r\n    function refreshData(name) {\r\n        if (dirty) {\r\n            var dialog_1 = Dialogs.show(Dialogs.ModalDialog, {\r\n                title: \"Unsaved Changes\",\r\n                content: $(\"<p/>\").addClass(\"confirmation-text\").html(\"Do you want to save changes for <b>\" + activeType.name + \"</b>?\"),\r\n                buttons: {\r\n                    \"Save\": function () {\r\n                        save(name);\r\n                        dialog_1.close();\r\n                    },\r\n                    \"No\": function () {\r\n                        makeClean();\r\n                        activeAll = null;\r\n                        activeSelected = null;\r\n                        refreshData(name);\r\n                        dialog_1.close();\r\n                    },\r\n                    \"Cancel\": function () {\r\n                        dialog_1.close();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n        else {\r\n            if (activeType) {\r\n                $(\"#type-\" + activeType.name.sanitize()).removeClass(\"selected\");\r\n            }\r\n            activeType = types.filter(function (type) {\r\n                return type.name === name;\r\n            })[0];\r\n            $(\"#type-\" + name.sanitize()).addClass(\"selected\");\r\n            key = \"wiprint-\" + activeType.name.sanitize();\r\n            $(\"#allList\").html(\"\");\r\n            allFields.splice(0, allFields.length);\r\n            $(\"#selectedList\").html(\"\");\r\n            selectedFields.splice(0, selectedFields.length);\r\n            dataService.then(function (service) {\r\n                service.getValue(key, { scopeType: \"user\" })\r\n                    .then(function (data) {\r\n                    if (data && data.length > 0) {\r\n                        data.forEach(function (field) {\r\n                            if (field !== null) {\r\n                                selectedFields.push(field);\r\n                            }\r\n                        });\r\n                        populateSelected();\r\n                    }\r\n                    else {\r\n                        $(\"#selectedList\").append(\"<li class=\\\"ms-ListItem\\\">\" +\r\n                            \"<span class=\\\"ms-ListItem-secondaryText\\\">No Saved Data</span>\" +\r\n                            \"</li>\");\r\n                    }\r\n                })\r\n                    .then(function () {\r\n                    activeType.fieldInstances\r\n                        .filter(function (field) {\r\n                        for (var i = 0, len = selectedFields.length; i < len; i++) {\r\n                            if (field.referenceName === selectedFields[i].referenceName) {\r\n                                return false;\r\n                            }\r\n                        }\r\n                        return true;\r\n                    })\r\n                        .forEach(function (field) {\r\n                        allFields.push(field);\r\n                    });\r\n                    populateAll();\r\n                });\r\n            });\r\n        }\r\n    }\r\n    function makeDirty() {\r\n        if (!dirty) {\r\n            dirty = true;\r\n            $(\"#save\").prop(\"disabled\", false);\r\n            $(\"#cancel\").prop(\"disabled\", false);\r\n        }\r\n    }\r\n    function makeClean() {\r\n        dirty = false;\r\n        $(\"#save\").prop(\"disabled\", true);\r\n        $(\"#cancel\").prop(\"disabled\", true);\r\n        activeAll = null;\r\n        activeSelected = null;\r\n    }\r\n    function populateAll() {\r\n        $(\"#allList\").html(\"\");\r\n        allFields\r\n            .sort(function (a, b) { return a.name > b.name ? 1 : -1; })\r\n            .forEach(function (field) {\r\n            $(\"#allList\").append(\"<li id=\\\"all-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#all-\" + field.name.sanitize()).click(function (e) {\r\n                selectAll(field.name);\r\n            }).dblclick(function (e) {\r\n                $(\"#push\").click();\r\n            });\r\n        });\r\n    }\r\n    function populateSelected() {\r\n        $(\"#selectedList\").html(\"\");\r\n        selectedFields.forEach(function (field) {\r\n            $(\"#selectedList\").append(\"<li id=\\\"selected-\" + field.name.sanitize() + \"\\\" class=\\\"ms-ListItem\\\">\" +\r\n                (\"<span class=\\\"ms-ListItem-secondaryText\\\">\" + field.name + \"</span>\") +\r\n                \"</li>\");\r\n            $(\"#selected-\" + field.name.sanitize()).click(function (e) {\r\n                selectSelected(field.name);\r\n            }).dblclick(function (e) {\r\n                $(\"#pop\").click();\r\n            });\r\n        });\r\n    }\r\n    $(\"#push\").click(function (e) {\r\n        if (activeAll) {\r\n            var allIndex = allFields.indexOf(activeAll);\r\n            var selectedIndex = selectedFields.indexOf(activeSelected) === -1 ?\r\n                selectedFields.length - 1 : selectedFields.indexOf(activeSelected);\r\n            allFields.splice(allIndex, 1);\r\n            selectedFields.splice(selectedIndex + 1, 0, activeAll);\r\n            populateAll();\r\n            if (allFields.length > 0) {\r\n                $(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()).click();\r\n                scroll($(\"#all-\" + allFields[allFields[allIndex] ? allIndex : allIndex - 1].name.sanitize()));\r\n            }\r\n            else {\r\n                activeAll = null;\r\n            }\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex + 1] ? selectedIndex + 1 : selectedIndex].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#pop\").click(function (e) {\r\n        if (activeSelected) {\r\n            var selectedIndex = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(selectedIndex, 1);\r\n            allFields.push(activeSelected);\r\n            populateSelected();\r\n            populateAll();\r\n            $(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()).click();\r\n            scroll($(\"#all-\" + allFields[allFields.indexOf(activeSelected)].name.sanitize()));\r\n            if (selectedFields.length > 0) {\r\n                $(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()).click();\r\n                scroll($(\"#selected-\" + selectedFields[selectedFields[selectedIndex] ? selectedIndex : selectedIndex - 1].name.sanitize()));\r\n            }\r\n            else {\r\n                activeSelected = null;\r\n            }\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#top\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\r\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\r\n            selectedFields.unshift(activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[0].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[0].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#bottom\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) < selectedFields.length) {\r\n            selectedFields.splice(selectedFields.indexOf(activeSelected), 1);\r\n            selectedFields.push(activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields.length - 1].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#up\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) > 0) {\r\n            var index = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(index, 1);\r\n            selectedFields.splice(index - 1, 0, activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[index - 1].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[index - 1].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    $(\"#down\").click(function (e) {\r\n        if (activeSelected && selectedFields.indexOf(activeSelected) < selectedFields.length) {\r\n            var index = selectedFields.indexOf(activeSelected);\r\n            selectedFields.splice(index, 1);\r\n            selectedFields.splice(index + 1, 0, activeSelected);\r\n            populateSelected();\r\n            $(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()).click();\r\n            scroll($(\"#selected-\" + selectedFields[selectedFields[index + 1] ? index + 1 : index].name.sanitize()));\r\n            makeDirty();\r\n        }\r\n    });\r\n    String.prototype.sanitize = function () {\r\n        return this.replace(/\\s/g, \"-\").replace(/[^a-z0-9\\-]/gi, \"\");\r\n    };\r\n    function scroll(child) {\r\n        var parent = child.parent();\r\n        parent.scrollTop(child.offset().top - parent.offset().top + parent.scrollTop() - 296);\r\n    }\r\n});\r\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/wiprint-admin.ts\n// module id = 5\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_6__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"VSS/Context\"\n// module id = 6\n// module chunks = 1","module.exports = __WEBPACK_EXTERNAL_MODULE_7__;\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"VSS/Controls/Dialogs\"\n// module id = 7\n// module chunks = 1"],"sourceRoot":""}