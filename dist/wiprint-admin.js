define(["TFS/WorkItemTracking/RestClient","VSS/Context","VSS/Controls/Dialogs"],function(e,n,t){return function(e){var n={};function t(i){if(n[i])return n[i].exports;var s=n[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,t),s.l=!0,s.exports}return t.m=e,t.c=n,t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:i})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(t.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var s in e)t.d(i,s,function(n){return e[n]}.bind(null,s));return i},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s=5)}([function(n,t){n.exports=e},,,,,function(e,n,t){var i,s;i=[t,n,t(6),t(0),t(7)],void 0===(s=function(e,n,t,i,s){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var l,c,a,o,r=t.getDefaultWebContext(),u=VSS.getService(VSS.ServiceIds.ExtensionData),f=i.getClient(),p=[],d=[],m=[],h=!1;function g(e){var n=d.slice();z(),o=null,a=null,u.then(function(t){t.setValue(l,n,{scopeType:"user"}).then(function(){v(e)})})}function v(e){if(h)var n=s.show(s.ModalDialog,{title:"Unsaved Changes",content:$("<p/>").addClass("confirmation-text").html("Do you want to save changes for <b>"+c.name+"</b>?"),buttons:{Save:function(){g(e),n.close()},No:function(){z(),o=null,a=null,v(e),n.close()},Cancel:function(){n.close()}}});else c&&$("#type-"+c.name.sanitize()).removeClass("selected"),c=m.filter(function(n){return n.name===e})[0],$("#type-"+e.sanitize()).addClass("selected"),l="wiprint-"+c.name.sanitize(),$("#allList").html(""),p.splice(0,p.length),$("#selectedList").html(""),d.splice(0,d.length),u.then(function(e){e.getValue(l,{scopeType:"user"}).then(function(e){e&&e.length>0?(e.forEach(function(e){null!==e&&d.push(e)}),k()):$("#selectedList").append('<li class="ms-ListItem"><span class="ms-ListItem-secondaryText">No Saved Data</span></li>')}).then(function(){c.fieldInstances.filter(function(e){for(var n=0,t=d.length;n<t;n++)if(e.referenceName===d[n].referenceName)return!1;return!0}).forEach(function(e){p.push(e)}),y()})})}function x(){h||(h=!0,$("#save").prop("disabled",!1),$("#cancel").prop("disabled",!1))}function z(){h=!1,$("#save").prop("disabled",!0),$("#cancel").prop("disabled",!0),o=null,a=null}function y(){$("#allList").html(""),p.sort(function(e,n){return e.name>n.name?1:-1}).forEach(function(e){$("#allList").append('<li id="all-'+e.name.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.name+"</span></li>"),$("#all-"+e.name.sanitize()).click(function(n){!function(e){o&&$("#all-"+o.name.sanitize()).removeClass("selected"),o=p.filter(function(n){return n.name===e})[0],$("#all-"+e.sanitize()).addClass("selected")}(e.name)}).dblclick(function(e){$("#push").click()})})}function k(){$("#selectedList").html(""),d.forEach(function(e){$("#selectedList").append('<li id="selected-'+e.name.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.name+"</span></li>"),$("#selected-"+e.name.sanitize()).click(function(n){!function(e){a&&$("#selected-"+a.name.sanitize()).removeClass("selected"),a=d.filter(function(n){return n.name===e})[0],$("#selected-"+e.sanitize()).addClass("selected")}(e.name)}).dblclick(function(e){$("#pop").click()})})}function b(e){var n=e.parent();n.scrollTop(e.offset().top-n.offset().top+n.scrollTop()-296)}z(),f.getWorkItemTypes(r.project.name).then(function(e){e.forEach(function(e){m.push(e),$("#typesList").append('<li id="type-'+e.name.sanitize()+'" class="ms-ListItem">'+(e.color?'<span class="ms-ListItem-image" style="background-color: #'+e.color+'"></span>':"")+'<span class="ms-ListItem-primaryText">'+e.name+'</span><span class="ms-ListItem-secondaryText">'+e.description+"</span></li>"),$("#type-"+e.name.sanitize()).click(function(n){v(e.name)})})}),$("#save").click(function(e){return g(c.name)}),$("#cancel").click(function(e){z(),v(c.name)}),$("#push").click(function(e){if(o){var n=p.indexOf(o),t=-1===d.indexOf(a)?d.length-1:d.indexOf(a);p.splice(n,1),d.splice(t+1,0,o),y(),p.length>0?($("#all-"+p[p[n]?n:n-1].name.sanitize()).click(),b($("#all-"+p[p[n]?n:n-1].name.sanitize()))):o=null,k(),$("#selected-"+d[d[t+1]?t+1:t].name.sanitize()).click(),b($("#selected-"+d[d[t+1]?t+1:t].name.sanitize())),x()}}),$("#pop").click(function(e){if(a){var n=d.indexOf(a);d.splice(n,1),p.push(a),k(),y(),$("#all-"+p[p.indexOf(a)].name.sanitize()).click(),b($("#all-"+p[p.indexOf(a)].name.sanitize())),d.length>0?($("#selected-"+d[d[n]?n:n-1].name.sanitize()).click(),b($("#selected-"+d[d[n]?n:n-1].name.sanitize()))):a=null,x()}}),$("#top").click(function(e){a&&d.indexOf(a)>0&&(d.splice(d.indexOf(a),1),d.unshift(a),k(),$("#selected-"+d[0].name.sanitize()).click(),b($("#selected-"+d[0].name.sanitize())),x())}),$("#bottom").click(function(e){a&&d.indexOf(a)<d.length&&(d.splice(d.indexOf(a),1),d.push(a),k(),$("#selected-"+d[d.length-1].name.sanitize()).click(),b($("#selected-"+d[d.length-1].name.sanitize())),x())}),$("#up").click(function(e){if(a&&d.indexOf(a)>0){var n=d.indexOf(a);d.splice(n,1),d.splice(n-1,0,a),k(),$("#selected-"+d[n-1].name.sanitize()).click(),b($("#selected-"+d[n-1].name.sanitize())),x()}}),$("#down").click(function(e){if(a&&d.indexOf(a)<d.length){var n=d.indexOf(a);d.splice(n,1),d.splice(n+1,0,a),k(),$("#selected-"+d[d[n+1]?n+1:n].name.sanitize()).click(),b($("#selected-"+d[d[n+1]?n+1:n].name.sanitize())),x()}}),String.prototype.sanitize=function(){return this.replace(/\s/g,"-").replace(/[^a-z0-9\-]/gi,"")}}.apply(n,i))||(e.exports=s)},function(e,t){e.exports=n},function(e,n){e.exports=t}])});
//# sourceMappingURL=wiprint-admin.js.map