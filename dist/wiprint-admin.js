define(["TFS/WorkItemTracking/RestClient","VSS/Context","VSS/Controls/Dialogs"],function(e,t,i){return function(e){function t(n){if(i[n])return i[n].exports;var s=i[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,t),s.l=!0,s.exports}var i={};return t.m=e,t.c=i,t.i=function(e){return e},t.d=function(e,i,n){t.o(e,i)||Object.defineProperty(e,i,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var i=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(i,"a",i),i},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=7)}([function(t,i){t.exports=e},function(e,t,i){var n,s;n=[i,t],void 0!==(s=function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t,i,s){this.dirty=!1,this.LHS=new n(e,i,s||null),this.RHS=new n(t,i,s||null)}return e.prototype.push=function(){var e=this,t=this.LHS.selected.map(function(t){return e.LHS.items[t]});this.LHS.remove(),this.RHS.add(t),this.dirty=!0},e.prototype.pop=function(){var e=this,t=this.RHS.selected.map(function(t){return e.RHS.items[t]});this.RHS.remove(),this.LHS.add(t),this.dirty=!0},e.prototype.up=function(){this.RHS.up(),this.dirty=!0},e.prototype.down=function(){this.RHS.down(),this.dirty=!0},e.prototype.top=function(){this.RHS.top(),this.dirty=!0},e.prototype.bottom=function(){},e.prototype.click=function(e,t,i,n){"print"===e?this.RHS.select(t,i||!1,n||!1):this.LHS.select(t,i||!1,n||!1)},e}();t.FieldsSelector=i;var n=function(){function e(e,t,i){var n=this;this.index=t,this.value=i,this.items=e.map(function(e){return new s(e[n.index],e[n.value])}),this.selected=[]}return e.prototype.add=function(e){if(e.length>0){e.reverse();var t=this.selected[this.selected.length-1]+1||this.items.length||0;this.selected=[];for(var i=0;i<e.length;i++)this.items.splice(t,0,e[i]),this.selected.push(t+i)}},e.prototype.remove=function(){var e=this;if(this.items.length>0){this.selected.sort().reverse();var t=this.selected[this.selected.length-1||0];this.selected.forEach(function(t){e.items.splice(t,1)}),this.selected=[],0!==t&&(this.selected=[this.items[t]?t:t-1])}},e.prototype.up=function(){var e=this,t=this.selected.map(function(t){if(0===t||e.selected.some(function(e){return e===t-1}))return t;var i=e.items.splice(t,1);return(n=e.items).splice.apply(n,[t-1,0].concat(i)),t-1;var n});this.selected=t},e.prototype.down=function(){var e=this,t=this.selected.map(function(t){if(t<e.items.length&&!e.selected.some(function(e){return e===t+1})){var i=e.items.splice(t,1);return(n=e.items).splice.apply(n,[t+1,0].concat(i)),t+1}return t;var n});this.selected=t},e.prototype.top=function(){var e=this;this.selected.sort().reverse();var t=[];this.selected.forEach(function(i){t.push(e.items.splice(i,1))}),(n=this.items).unshift.apply(n,t),this.selected=[];for(var i=0;i<t.length;i++)this.selected.push[i];var n},e.prototype.bottom=function(){},e.prototype.select=function(e,t,i){if(t&&!i)this.selected.push(e);else if(i){this.selected.push(e);var n=this.selected.reduce(function(e,t){return Math.min(e,t)}),s=this.selected.reduce(function(e,t){return Math.max(e,t)});this.selected=[];for(var c=n;c<=s;c++)this.selected.push(c)}else this.selected=[],this.selected.push(e)},e.prototype.sort=function(){var e=this,t=this.selected.map(function(t){return e.items[t].index});this.items.sort(function(e,t){return e.index>t.index?1:-1}),this.selected=t.map(function(t){for(var i=0;i<e.items.length;i++)if(e.items[i].index===t)return i})},e.prototype.sync=function(e){},e}();t.Selector=n;var s=function(){function e(e,t){this.index=e,this.value=t||e}return e}();t.SelectorItem=s}.apply(t,n))&&(e.exports=s)},,function(e,i){e.exports=t},function(e,t){e.exports=i},,,function(e,t,i){var n,s;n=[i,t,i(3),i(0),i(4),i(1)],void 0!==(s=function(e,t,i,n,s,c){"use strict";function o(e){if(d&&d.dirty)var t=s.show(s.ModalDialog,{title:"Unsaved Changes",content:$("<p/>").addClass("confirmation-text").html("Do you want to save changes for <b>"+p.name+"</b>?"),buttons:{Save:function(){t.close()},No:function(){r(),o(e),t.close()},Cancel:function(){t.close()}}});else p&&$("#type-"+p.name.sanitize()).removeClass("selected"),p=v.filter(function(t){return t.name===e})[0],$("#type-"+e.sanitize()).addClass("selected"),h.then(function(e){e.getValue("wiprint-"+p.name.sanitize(),{scopeType:"user"}).then(function(e){e&&e.length>0?e.forEach(function(e){S.push(e)}):S.push({alwaysRequired:!1,field:null,helpText:"",name:"No Saved Data",referenceName:"No Saved Data",url:""})}).then(function(){p.fieldInstances.filter(function(e){for(var t=0,i=S.length;t<i;t++)if(e.name===S[t].name)return!1;return!0}).sort(function(e,t){return e.name>t.name?1:-1}).forEach(function(e){y.push(e)}),d=new c.FieldsSelector(y,S,"name"),a(),u()})})}function r(){$("#save").prop("disabled",!d.dirty),$("#cancel").prop("disabled",!d.dirty)}function l(e,t){e.scrollTop(37*t-333)}function a(){$("#allList").html(""),d.LHS.sort(),d.LHS.items.forEach(function(e){$("#allList").append('<li id="all-'+e.value.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.value+"</span></li>"),$("#all-"+e.value.sanitize()).click(function(t){d.click("all",d.LHS.items.indexOf(e),t.ctrlKey,t.shiftKey),a()}).dblclick(function(e){$("#push").click(),a()})}),d.LHS.selected.forEach(function(e){$("#all-"+d.LHS.items[e].value.sanitize()).addClass("selected")})}function u(){$("#selectedList").html(""),d.RHS.items.forEach(function(e){$("#selectedList").append('<li id="selected-'+e.value.sanitize()+'" class="ms-ListItem"><span class="ms-ListItem-secondaryText">'+e.value+"</span></li>"),$("#selected-"+e.value.sanitize()).click(function(t){d.click("print",d.RHS.items.indexOf(e),t.ctrlKey,t.shiftKey),u()}).dblclick(function(e){$("#pop").click(),u()})}),d.RHS.selected.forEach(function(e){$("#selected-"+d.RHS.items[e].value.sanitize()).addClass("selected")})}Object.defineProperty(t,"__esModule",{value:!0});var p,d,f=i.getDefaultWebContext(),h=VSS.getService(VSS.ServiceIds.ExtensionData),m=n.getClient(),v=[],y=[],S=[];m.getWorkItemTypes(f.project.name).then(function(e){e.forEach(function(e){v.push(e),$("#typesList").append('<li id="type-'+e.name.sanitize()+'" class="ms-ListItem">'+(e.color?'<span class="ms-ListItem-image" style="background-color: #'+e.color+'"></span>':"")+'<span class="ms-ListItem-primaryText">'+e.name+'</span><span class="ms-ListItem-secondaryText">'+e.description+"</span></li>"),$("#type-"+e.name.sanitize()).click(function(t){o(e.name)})})}),$("#save").click(function(e){return void p.name}),$("#cancel").click(function(e){r(),o(p.name)}),$("#push").click(function(e){d.push(),a(),u(),l($("#allList"),d.LHS.selected[0]),l($("#selectedList"),d.RHS.selected[0]),r()}),$("#pop").click(function(e){d.pop(),a(),u(),l($("#allList"),d.LHS.selected[0]),l($("#selectedList"),d.RHS.selected[0]),r()}),$("#top").click(function(e){d.top(),u(),l($("#selectedList"),d.RHS.selected[0]),r()}),$("#bottom").click(function(e){d.bottom(),u(),l($("#selectedList"),d.RHS.selected[0]),r()}),$("#up").click(function(e){d.up(),u(),l($("#selectedList"),d.RHS.selected[0]),r()}),$("#down").click(function(e){d.down(),u(),l($("#selectedList"),d.RHS.selected[0]),r()}),String.prototype.sanitize=function(){return this.replace(/\s/g,"-").replace(/[^a-z0-9\-]/gi,"")}}.apply(t,n))&&(e.exports=s)}])});
//# sourceMappingURL=wiprint-admin.js.map